########################################################################################################################
# Memo:
########################################################################################################################

# This file is used to configure files/folders to copy and folder links to create (before running premake).

# Mappings ($ string substitutions). Name and examples:
# |==========================================================
# | $platform      | 'windows-x86_64'     | 'linux-x86_64'  | 
# |----------------------------------------------------------
# | $lib_ext       | '.dll'               | '.so'           |
# | $lib_prefix    | ''                   | 'lib.'          |
# | $bindings_ext  | '.pyd'               | '.so'           |
# | $exe_ext       | '.exe'               | ''              |
# | $shell_ext     | '.bat'               | '.sh'           |
# |==========================================================
#
# |==========================================================
# | $config        | 'debug'              | 'release'       |
# |==========================================================

# Filters. For example, debug config on linux-x86_64 matches all those toml keys:
# [linux-x86_64]
# [debug]
# [linux.debug]
# So you can use those in any order as a keys: ["linux-x86_64", "debug", "linux", "x86_64"]


########################################################################################################################
# Common section:
########################################################################################################################

copy = [
    # Extensions bootstrap python code 
    ["source/extensions/example.cpp_extension/python/*.py", "_build/$platform/$config/extensions/omni/example/cpp_extension"],
    ["source/extensions/example.mixed_extension/python/*.py", "_build/$platform/$config/extensions/omni/example/mixed_extension"],

    # Copy app running scripts in target dir
    ["source/apps/*$shell_ext", "_build/$platform/$config"],
    ["source/apps/$config/*$shell_ext", "_build/$platform/$config"],
]
link = [
    # Extensions folder linked python code
    ["source/extensions/example.cpp_extension/python/scripts", "_build/$platform/$config/extensions/omni/example/cpp_extension/scripts"],
    ["source/extensions/example.mixed_extension/python/scripts", "_build/$platform/$config/extensions/omni/example/mixed_extension/scripts"],
    ["source/extensions/example.python_extension", "_build/$platform/$config/extensions/omni/example/python_extension"],

    # Link app configs in target dir for easier edit
    ["source/apps/configs", "_build/$platform/$config/apps"],

    # Link python app sources in target dir for easier edit
    ["source/apps/pythonapps", "_build/$platform/$config/pythonapps"],

]


########################################################################################################################
# Windows platform:
########################################################################################################################

[windows-x86_64]
copy = []
link = []


########################################################################################################################
# Linux x86_64 platform:
########################################################################################################################

[linux-x86_64]
copy = []
link = []
