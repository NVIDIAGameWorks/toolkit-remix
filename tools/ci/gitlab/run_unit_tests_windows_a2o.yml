run-unit-tests-windows-a2o:
  extends: .defaults
  stage: build_run_tests_and_doc
  tags:
    - quadro
  needs:
    - check-code-lint
  variables:
    DXVK_CONFIG_FILE: '.\source\extensions\lightspeed.hydra.remix.core\lightspeed\trex\hydra\remix\data\tests\dxvk.conf'
  before_script:
    - .\build.bat --clean --release
    - .\build.bat --release
    - .\repo.bat publish_exts --verify
  script:
    - .\_build\windows-x86_64\release\lightspeed.app.trex.ingestcraft.cli.bat -h  # test that the ingestion CLI is not broken
    - .\repo.bat test --suite unit_win_a2o --config release
