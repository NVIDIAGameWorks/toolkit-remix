stages:
  - check

check-code-format:
  stage: check
  only:
    - merge_requests
  variables:
      GIT_STRATEGY: fetch
      GIT_DEPTH: 0 #get all previous commits to know the files that changed
  script:
    - git remote set-head origin --auto    
    - ./format_code.bat --verify
  except:
    variables:
      - $CI_MERGE_REQUEST_TITLE =~ /\[pipeline:format:skip\]/
  timeout: 45m